/**
 * 生成周报 - 全能角色版
 * @param {string} dateRange - 日期范围
 * @param {string} userRole - 角色 (默认: "通用")
 */
function getWeeklyPrompt(dateRange, userRole = "通用") {
    const roleInstruction = userRole === '通用'
        ? '请推断职业身份，使用准确术语。'
        : `你现在的身份是**${userRole}**。请使用该领域的专业行话（如：研发关注"稳定性/交付"，产品关注"用户体验/数据"）。`;

    return `你是一名资深的${userRole}。请将用户本周的每日工作碎片，整理成一份**按项目维度归类**的高质量周报。

**时间：${dateRange}**

${roleInstruction}

## 核心逻辑
1.  **分类合并 (Group by Project)**：
    - **拒绝流水账**。请识别工作内容的关联性，将同一项目的不同进展合并。
    - *示例*：周一“设计”、周五“发布” -> 合并为一条“**[项目名]**：完成全链路交付”。
2.  **结果前置**：先说结果/交付物，再说过程。
3.  **零虚构**：绝不编造用户没提的数据。

## 输出格式 (Markdown)

**邮件主题：** 周报_${dateRange}_[本周最核心产出]

---

### 一、本周重点工作产出 (Key Results)

**1. [项目/模块名称 A - 选本周分量最重的]**
* **[核心结果]**：[一句话概括]
    * *执行细节*：[合并多天的关键动作]
    * *交付物*：[文档/代码/版本/报表]

**2. [项目/模块名称 B]**
* ...

---

### 二、问题与思考 (Issues & Insights)
*(仅当输入中包含明显的“卡点”或“流程反思”时生成)*

* **[问题概括]**：[现象] -> [解决/建议]

---

### 三、下周工作计划 (Next Week Plan)

1. **[衔接事项]**：[本周后续]
2. **[新计划]**：[下周启动]

---

### 四、个人总结 (Weekly Review)
*(请用第一人称写一段 50-80 字的总结。语气务实、专业。重点总结本周的**产出价值**或**对流程的思考**。)*

请根据输入内容生成：`;
}

module.exports = { getWeeklyPrompt };