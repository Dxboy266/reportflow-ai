# AI 日报周报生成器 - 实施计划

> 📅 创建时间: 2026-01-23
> 🎯 目标: 创建一个简单稳妥的 AI 日报/周报生成工具

---

## 📋 需求概述

| 功能 | 描述 |
|------|------|
| **日报生成** | 输入今日工作内容 → AI润色生成正式日报 |
| **周报生成** | 自动汇总已采用的近5天日报 → 生成周报 |
| **重新生成** | 支持调整风格重新生成，直到满意为止 |
| **数据存储** | 本地JSON文件存储，稳妥可靠 |
| **采用机制** | 只有点击"采用"的日报/周报才会被保存记录 |

---

## 🛠️ 技术栈选择

| 层级 | 技术 | 理由 |
|------|------|------|
| **后端** | Node.js + Express | 轻量、语法接近Java、JSON处理天然友好 |
| **前端** | HTML + CSS + JavaScript | 原生技术，无框架依赖，Java程序员秒懂 |
| **存储** | 本地 JSON 文件 | 无需数据库，数据稳妥可备份 |
| **AI** | DeepSeek API | 国内访问快、便宜（0.1元/百万token）、效果好 |

---

## 📁 项目结构

```
ai-report-generator/
├── package.json          # Node.js 项目配置
├── server.js             # 后端服务入口（Express）
├── config.json           # 配置文件（API Key等）
├── data/                 # 数据存储目录
│   └── 2026/             # 年
│       └── 01/           # 月
│           ├── W04/      # 第4周（以周为核心单元）
│           │   ├── daily/          # 这一周的日报
│           │   │   ├── 01-20.json  # 周一
│           │   │   ├── 01-21.json  # 周二
│           │   │   ├── 01-22.json  # 周三
│           │   │   ├── 01-23.json  # 周四
│           │   │   └── 01-24.json  # 周五
│           │   └── weekly.json     # 这一周的周报
│           └── W05/      # 第5周
│               ├── daily/
│               └── weekly.json
├── public/
│   ├── index.html        # 主页面
│   ├── style.css         # 样式文件
│   └── app.js            # 前端逻辑
└── README.md             # 使用说明
```

### 📂 存储策略说明

| 路径 | 内容 | 说明 |
|------|------|------|
| `data/YYYY/MM/WXX/daily/` | 日报目录 | 存放该周每天的日报 |
| `data/YYYY/MM/WXX/weekly.json` | 周报文件 | 该周的周报 |

**以周为核心单元的优点**：
- ✅ **结构直观**：一周的内容全在一起
- ✅ **生成周报方便**：直接读取 `WXX/daily/` 下所有日报即可
- ✅ **归档清晰**：按周打包备份很自然

---

## 🎨 UI 设计

### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│  🗓️ AI 日报周报生成器                    [设置⚙️]      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────┐  ┌─────────────────┐              │
│  │   📝 写日报     │  │   📊 生成周报    │              │
│  └─────────────────┘  └─────────────────┘              │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  今日工作内容：                                   │   │
│  │  ┌───────────────────────────────────────────┐  │   │
│  │  │ 1. 完成了用户模块的接口开发                │  │   │
│  │  │ 2. 修复了订单查询的BUG                     │  │   │
│  │  │ 3. 参加了需求评审会议                      │  │   │
│  │  └───────────────────────────────────────────┘  │   │
│  │                                                   │   │
│  │  风格: [正式▼]  [✨ 生成日报]                    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  📄 生成结果预览：                               │   │
│  │  ┌───────────────────────────────────────────┐  │   │
│  │  │ 【今日工作汇报】                           │  │   │
│  │  │ 一、开发工作                               │  │   │
│  │  │ 1. 完成用户模块核心接口开发...             │  │   │
│  │  └───────────────────────────────────────────┘  │   │
│  │                                                   │   │
│  │  [🔄 重新生成]  [✅ 采用并保存]                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  📚 历史记录                                     │   │
│  │  ├─ 2026-01-23 日报 ✅                          │   │
│  │  ├─ 2026-01-22 日报 ✅                          │   │
│  │  └─ 2026-01-21 日报 ✅                          │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 设计风格
- 🌙 暗色主题（程序员护眼）
- 🎨 渐变色按钮 + 玻璃态卡片
- ✨ 微动效（hover、loading）
- 📱 响应式布局

---

## 🔧 核心功能模块

### 1. 日报生成接口
```javascript
// 用户输入 → AI润色 → 返回预览（不保存）
POST /api/generate-daily
Body: { 
  content: "今日工作内容...", 
  style: "formal|casual|tech" 
}
Response: { 
  success: true,
  report: "润色后的日报内容" 
}
```

### 2. 日报保存接口
```javascript
// 用户点击"采用"后保存到对应周目录
// 自动计算周数并创建目录：data/2026/01/W04/daily/01-23.json
POST /api/save-daily
Body: { 
  date: "2026-01-23",        // 日期
  rawContent: "原始内容",     // 用户输入
  generatedReport: "润色后内容", // AI生成
  style: "formal"
}
Response: { 
  success: true, 
  path: "data/2026/01/W04/daily/01-23.json" 
}
```

### 3. 周报生成接口
```javascript
// 自动读取当前周目录下所有日报 → 汇总生成周报
POST /api/generate-weekly
Body: { 
  style: "formal|casual|tech" 
}
Response: { 
  success: true,
  report: "周报内容",
  includedDays: ["01-20", "01-21", "01-22", "01-23", "01-24"]
}
```

### 4. 周报保存接口
```javascript
// 保存到对应周目录：data/2026/01/W04/weekly.json
POST /api/save-weekly
Body: { 
  generatedReport: "周报内容",
  style: "formal"
}
Response: { 
  success: true, 
  path: "data/2026/01/W04/weekly.json" 
}
```

### 5. 历史查询接口
```javascript
// 获取当前周的所有日报
GET /api/current-week/dailies
Response: { 
  weekNumber: 4,
  dailies: [
    { date: "01-20", hasReport: true },
    { date: "01-21", hasReport: true },
    { date: "01-22", hasReport: false },
    ...
  ]
}

// 获取指定日期的日报详情
GET /api/daily/:date  // e.g. /api/daily/2026-01-23
Response: { 
  date: "2026-01-23",
  rawContent: "...",
  generatedReport: "..."
}

// 获取最近的周报列表
GET /api/weekly-reports?limit=5
Response: {
  reports: [
    { week: "W04", weekStart: "01-20", weekEnd: "01-24", path: "..." },
    ...
  ]
}
```

---

## 📝 数据结构设计

### 日报文件：`data/YYYY/MM/WXX/daily/MM-DD.json`

> 例如：`data/2026/01/W04/daily/01-23.json`

```json
{
  "date": "2026-01-23",
  "weekday": "周四",
  "rawContent": "用户原始输入的工作内容",
  "generatedReport": "AI生成的正式日报",
  "style": "formal",
  "createdAt": "2026-01-23T18:30:00+08:00"
}
```

### 周报文件：`data/YYYY/MM/WXX/weekly.json`

> 例如：`data/2026/01/W04/weekly.json`

```json
{
  "weekNumber": 4,
  "weekStart": "2026-01-20",
  "weekEnd": "2026-01-24",
  "includedDays": ["01-20", "01-21", "01-22", "01-23", "01-24"],
  "generatedReport": "AI生成的周报内容",
  "style": "formal",
  "createdAt": "2026-01-24T18:00:00+08:00"
}
```

### 字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| `rawContent` | string | 用户输入的原始工作内容 |
| `generatedReport` | string | AI润色后的正式报告 |
| `style` | string | 生成风格：formal(正式)/casual(轻松)/tech(技术) |
| `includedDays` | array | 周报包含的日报日期列表 |

---

## 🚀 实施步骤

### Phase 1: 项目初始化（5分钟）
- [ ] 创建项目目录结构
- [ ] 初始化 package.json
- [ ] 安装依赖：express, cors, node-fetch

### Phase 2: 后端开发（20分钟）
- [ ] 创建 Express 服务器
- [ ] 实现 JSON 文件读写工具函数
- [ ] 实现 DeepSeek API 调用封装
- [ ] 实现日报生成/保存接口
- [ ] 实现周报生成/保存接口
- [ ] 实现历史查询接口

### Phase 3: 前端开发（30分钟）
- [ ] 创建 HTML 页面结构
- [ ] 编写 CSS 样式（暗色主题 + 动效）
- [ ] 实现日报输入 & 生成功能
- [ ] 实现周报生成功能
- [ ] 实现历史记录展示
- [ ] 实现设置面板（API Key 配置）

### Phase 4: 测试 & 优化（10分钟）
- [ ] 端到端测试
- [ ] 错误处理优化
- [ ] 编写 README 使用说明

---

## ⚙️ 配置说明

### 启动方式
```bash
# 1. 进入项目目录
cd ai-report-generator

# 2. 安装依赖（首次运行）
npm install

# 3. 配置 API Key（首次运行）
# 在页面设置中配置 DeepSeek API Key

# 4. 启动服务
npm start

# 5. 打开浏览器访问
# http://localhost:3000
```

### 获取 DeepSeek API Key
1. 访问 https://platform.deepseek.com/
2. 注册账号并登录
3. 进入 API Keys 页面创建密钥
4. 复制密钥到应用设置中

---

## 💡 扩展功能（可选）

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **模板管理** | 自定义日报/周报模板 | P2 |
| **数据导出** | 导出为 Markdown/Word | P2 |
| **多风格切换** | 正式/轻松/技术等风格 | P1 |
| **Prompt自定义** | 用户可自定义AI提示词 | P2 |
| **数据备份** | 一键备份/恢复数据 | P1 |

---

## 📌 注意事项

1. **数据安全**: JSON文件存储在本地，建议定期备份 `data/` 目录
2. **API费用**: DeepSeek API 非常便宜，日常使用几乎无成本
3. **网络要求**: 生成报告需要网络访问 DeepSeek API
4. **浏览器兼容**: 推荐使用 Chrome/Edge 最新版

---

## 🎯 执行命令

在新窗口中直接告诉我：

> **"请按照 `ai-daily-report-generator-plan.md` 的计划，帮我创建这个日报周报生成器项目"**

我会自动读取这个计划并开始创建项目！
